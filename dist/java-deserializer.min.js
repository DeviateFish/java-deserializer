/*! java-deserializer 03-12-2014 */
!function(a,b){"use strict";var c=function(){var a=function(a,b){var c=function(){};c.prototype=b.prototype,a.superClass_=b.prototype,a.prototype=new c,a.prototype.constructor=a};ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(a,c){var d=new Uint8Array(this);c==b&&(c=d.length);for(var e=new ArrayBuffer(c-a),f=new Uint8Array(e),g=0;g<f.length;g++)f[g]=d[g+a];return e});var c=44269,d=5,e=112,f=113,g=114,h=116,i=117,j=119,k=120,l=8257536,m=[],n=function(a,b,c){this.dataview=a,this.startingOffset=this.currentOffset=b,this.type=c,this.contents={}};n.prototype.getLength=function(){return this.currentOffset-this.startingOffset},n.prototype.readUint32=function(){var a=this.dataview.getUint32(this.currentOffset);return this.currentOffset+=4,a},n.prototype.readUint16=function(){var a=this.dataview.getUint16(this.currentOffset);return this.currentOffset+=2,a},n.prototype.readUint8=function(){var a=this.dataview.getUint8(this.currentOffset);return this.currentOffset++,a},n.prototype.readInt32=function(){var a=this.dataview.getInt32(this.currentOffset);return this.currentOffset+=4,a},n.prototype.readInt16=function(){var a=this.dataview.getInt16(this.currentOffset);return this.currentOffset+=2,a},n.prototype.readInt8=function(){var a=this.dataview.getInt8(this.currentOffset);return this.currentOffset++,a},n.prototype.readFloat32=function(){var a=this.dataview.getFloat32(this.currentOffset);return this.currentOffset+=4,a};var o=function(a,b){n.call(this,a,b,"utfStr");for(var c=this.readUint16(),d="",e=0;c>e;e++)d+=String.fromCharCode(this.readUint8());this.contents.length=c,this.contents.str=d};a(o,n),o.prototype.toArray=function(){for(var a=[],b=0;b<this.contents.str.length;b++)a.push(this.contents.str.charAt(b));return a};var p=function(a,b){var c="BCDFIJSZ";n.call(this,a,b,"classDesc");var d=this.readUint8();if(d!==e){if(d===f){var h=this.readUint32()-l;return void(this.contents=m[h].contents)}if(d!==g)return void console.log("I don't know how to handle this type yet: "+d);var i=new o(this.dataview,this.currentOffset);this.currentOffset+=i.getLength(),this.contents.name=i,this.contents.versionId=[this.readUint32(),this.readUint32()],this.contents.handle=m.length,this.contents.flags=this.readUint8();for(var j=[],q=this.readUint16(),r=0;q>r;r++){var s={};s.type=this.readUint8(),s.name=new o(this.dataview,this.currentOffset),this.currentOffset+=s.name.getLength(),-1===c.indexOf(String.fromCharCode(s.type))&&console.log("this is not a primitive type: "+s.type),j.push(s)}this.contents.fields=j,this.contents.annotation=this.readUint8(),this.contents.annotation!==k&&console.log("I don't know what to do with this: "+this.contents.annotation),this.contents.superClass=new p(this.dataview,this.currentOffset),this.currentOffset+=this.contents.superClass.getLength(),m.push(this)}};a(p,n),p.prototype.getSize=function(){return 4};var q=function(a,b){n.call(this,a,b,"jArray");var c,d=new p(a,this.currentOffset);this.contents.description=d,this.currentOffset+=d.getLength(),this.contents.handle=m.length,this.contents.size=this.readUint32(),this.contents.elements=[];var e=d.contents.name&&d.contents.name.contents.str;if("[F"===e)for(this.contents.elements=new Float32Array(this.contents.size),c=0;c<this.contents.size;c++)this.contents.elements[c]=this.readFloat32();else if("[S"===e)for(this.contents.elements=new Uint16Array(this.contents.size),c=0;c<this.contents.size;c++)this.contents.elements[c]=this.readInt16();else for(this.contents.elements=[],c=0;c<this.contents.size;c++){var f=new s(this.dataview,this.currentOffset);this.currentOffset+=f.getLength(),this.contents.elements.push(f)}m.push(this)};a(q,n),q.prototype.toArray=function(){return this.contents&&this.contents.elements||null};var r=function(a,b){n.call(this,a,b,"blockData");for(var c=this.readUint8(),d=new ArrayBuffer(c),e=new Uint8Array(d),f=0;c>f;f++)e[f]=this.readUint8();this.contents.size=c,this.contents.blocks=d};a(r,n),r.prototype.toArray=function(){return this.contents&&this.contents.blocks||null};var s=function(a,b){n.call(this,a,b,"Contents");var c=this.readUint8(),d=null;switch(c){case i:d=new q(this.dataview,this.currentOffset);break;case j:d=new r(this.dataview,this.currentOffset);break;case h:d=new o(this.dataview,this.currentOffset);break;default:console.log("unhandled type")}d&&(this.currentOffset+=d.getLength()),this.contents=d,this.type=c};a(s,n);var t=function(a){if(n.call(this,a,0,"Stream"),this.readUint16()!==c)throw"invalid magic number!";if(this.readUint16()!==d)throw"invalid version!";this.contents=null};a(t,n),t.prototype.getContents=function(){if(!this.contents)for(this.contents=[];this.currentOffset<this.dataview.byteLength;){var a=new s(this.dataview,this.currentOffset);this.currentOffset+=a.getLength(),this.contents.push(a)}return this.contents};var u=function(a){this.buf=a};return u.prototype.getStream=function(){return new t(new DataView(this.buf,0))},u}();c.VERSION="0.0.0",a.JavaDeserializer=c}(this);